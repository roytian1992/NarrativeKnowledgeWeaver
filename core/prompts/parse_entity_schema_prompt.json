{
  "id": "parse_entity_schema_prompt",
  "category": "regular_function",
  "name": "背景驱动实体Schema生成（类型规范·最小可用示例）",
  "description": "读取背景信息，自主抽取与语境贴合的实体类型与属性；保持通用、精炼、可复用。仅返回包含 entities 的 JSON。",
  "template": "请阅读【背景信息】，设计一套实体 Schema，并仅输出一个包含 `entities` 键的 JSON（不要输出解释或 Markdown）。\n\n【命名规范】\n- 类型名：英文单数、TitleCase（如 Character、Organization、Event）。\n- 属性名：英文小写 snake_case（如 name, role, category, start_time）。\n\n【设计要求】\n- 每个类型包含：type、description（一句中文定义）、properties（为该类型设计 3–6 个常用属性；优先通用与易落地字段；不确定可在中文末尾标注“（可选）”）。\n- 避免实现细节与工程字段（如 id/embedding/vector/debug 等）。\n- 背景稀疏时，至少覆盖最小五类：Character / Object / Event / Location / Concept；背景充分时可增补贴合语境的新类型，但避免同义冗余与过度细分。\n- 属性尽量通用：优先身份、功能、状态、时间、来源/归属、量级等；避免把关系写进属性（关系留给关系Schema处理）。\n\n【去冗余与对齐】\n- 合并同义或高度重叠的类型（保留语义更宽的那一个）。\n- 与可能的关系Schema对齐：类型应能作为关系两端参与者，避免只在单点场景成立的窄类型。\n\n【输出前自检（隐性执行）】\n- ✅ 类型命名均为 TitleCase 单数；属性均为 snake_case\n- ✅ 每个类型 3–6 个属性、中文定义清晰\n- ✅ 未包含实现细节/工程字段\n- ✅ 至少覆盖 Character/Object/Event/Location/Concept（若背景允许）\n\n【Minimal Example（示意，勿照抄；属性精简版）】\n{{\n  \"entities\": [\n    {{\n      \"type\": \"Character\",\n      \"description\": \"能被识别并参与行动的个体或群体代表。\",\n      \"properties\": {{ \"name\": \"姓名/称呼\", \"role\": \"角色/身份（可选）\", \"affiliation\": \"所属组织/阵营（可选）\" }}\n    }},\n    {{\n      \"type\": \"Object\",\n      \"description\": \"在背景中产生作用的物品、装备或系统模块。\",\n      \"properties\": {{ \"name\": \"名称\", \"category\": \"类别（可选）\", \"spec\": \"关键规格/要点（可选）\" }}\n    }},\n    {{\n      \"type\": \"Event\",\n      \"description\": \"具有时间指向并影响进程的情节节点。\",\n      \"properties\": {{ \"title\": \"事件标题\", \"summary\": \"一句话概述\", \"time\": \"发生时间（可选）\" }}\n    }},\n    {{\n      \"type\": \"Location\",\n      \"description\": \"背景中的地点、场景或设施。\",\n      \"properties\": {{ \"name\": \"地点名称\", \"category\": \"类型（可选）\", \"description\": \"简要说明（可选）\" }}\n    }},\n    {{\n      \"type\": \"Concept\",\n      \"description\": \"抽象或群体性概念，如组织/计划/学说等。\",\n      \"properties\": {{ \"name\": \"名称\", \"definition\": \"一句话定义\", \"scope\": \"适用范围（可选）\" }}\n    }}\n  ]\n}}\n\n【当前的背景信息】\n{current_background}\n\n【最终输出（仅此 JSON）】\n{{\n  \"entities\": [\n    {{ \"type\": \"...\", \"description\": \"...\", \"properties\": {{ \"name\": \"...\", \"...\": \"...\" }} }}\n  ]\n}}",
  "variables": [
    {
      "name": "current_background",
      "description": "当前的背景信息。"
    }
  ]
}
