{
  "id": "parse_relation_schema_prompt",
  "category": "regular_function",
  "name": "背景驱动关系Schema生成（思维链约束版）",
  "description": "根据背景信息与实体schema设计精炼、可复用的关系schema。模型可在内部逐步思考，但最终仅输出合规JSON。",
  "template": "请阅读洞见文本与【背景信息】，结合【实体Schema】生成一套**关系 Schema**。你可以在内部逐步推理，但**不要在输出中展示任何思考过程**，只给最终 JSON。\n\n【约束要求】\n- 只输出一个 JSON，顶层只能包含 `relations` 键。\n- `relations` 的值为对象；其中包含若干分组（1–6个），分组名由你自定。\n- 每个分组是数组；数组内每条关系是对象，且只能包含：\n  - `type`：英文 snake_case。\n  - `description`：中文短句；句尾括号注明参与类型与方向。\n- 总关系类型数 ≤ 20；避免同义冗余。\n- 严禁中文或口语化动词，需归并为规范谓词。\n\n【输出格式示例】\n```json\n{{\n  \"relations\": {{\n    \"core_interactions\": [\n      {{ \"type\": \"participates_in\", \"description\": \"角色参与事件（Character → Event）\" }},\n      {{ \"type\": \"has_action\", \"description\": \"事件包含动作步骤（Event → Action）\" }}\n    ],\n    \"spatiotemporal\": [\n      {{ \"type\": \"occurs_at\", \"description\": \"事件/动作发生在某地（Event / Action → Location）\" }},\n      {{ \"type\": \"occurs_on\", \"description\": \"事件/动作发生在某时间（Event / Action → TimePoint）\" }}\n    ],\n    \"affiliation_conflict\": [\n      {{ \"type\": \"affiliated_with\", \"description\": \"个体/单位隶属于组织或阵营（Character / Object → Concept）\" }},\n      {{ \"type\": \"conflicts_with\", \"description\": \"两方存在对立/敌对关系（Character / Concept ↔ Character / Concept）\" }}\n    ]\n  }}\n}}\n```\n\n【当前的背景信息】\n{current_background}\n\n【实体Schema】\n{entity_schema}\n\n【最终输出格式（仅此 JSON）】\n```json\n{{\n  \"relations\": {{\n    \"<group_name>\": [ {{ \"type\": \"...\", \"description\": \"...（TypeA → TypeB）\" }} ]\n  }}\n}}\n```",
  "variables": [
    {
      "name": "current_background",
      "description": "当前的背景信息。"
    },
    {
      "name": "entity_schema",
      "description": "现有的实体schema JSON（仅含 entities 数组；type/description/properties）"
    }
  ]
}
