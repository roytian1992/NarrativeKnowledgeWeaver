{
  "id": "check_entity_scope_prompt",
  "category": "regular_function",
  "name": "Entity Scope Determination Prompt (Chain of Thought, Global/Local)",
  "description": "Used in the context of narrative/knowledge graphs to determine, based on the provided context, whether the scope of a single entity is global (cross-scenario/cross-timeline/world-element level) or local (local scenario/one-time element). Only return {\"scope\": \"global\"} or {\"scope\": \"local\"}.",
  "template": "You are a knowledge graph construction expert. Task: For the same \"entity\", based on the provided contextual evidence, determine whether its scope in the current project should be global or local. Please perform rigorous chain-of-thought reasoning internally, but the reasoning process should not be exposed in the final output; only output the JSON result.\n\n[Input]\n{context}\n\n[Chain of Thought Steps (Internal reasoning only, do not output)]\n1. Evidence Extraction: Organize the entity's naming conventions (proper noun/common noun), whether it has a unique identifier (official name, number, organization name, place name), scenes/chapters/time points of appearance, number and span of references, and connection to core characters/plots.\n2. Cross-scenario and Time Span: If the entity clearly appears repeatedly or is referred to in multiple scenes/chapters/time periods, and maintains the same identity and semantic function, it tends to be marked as global.\n3. World Elements and System-level Objects: If the entity is a world-view/setting-level element (e.g., country/organization/long-term facility/city/technology system/plan/regulation, etc.), even if it appears a limited number of times in the current context, it tends to be global; however, if the context clearly states that it only plays a brief role in a single local event, it should be downgraded to local.\n4. Local One-time Elements: If the entity appears only in one scene/single event, or is a temporary/replaceable object (e.g., \"a security guard,\" \"a passenger,\" \"a one-time tool,\" \"a temporary meeting room,\" etc.), and has no continuous impact or recurrence evidence, it is determined to be local.\n5. Stability of Characters and Objects: Protagonists/key supporting characters and their stable identities are usually global; one-time passers-by, temporary equipment, temporary locations (e.g., emergency tents) are usually local. If an entity is clearly marked as an alias, disguise, stand-in, clone, AI avatar, etc., of a global character or element, and continues to play a role in multiple scenarios or key plots, it is considered to be within the same scope as the original global entity and determined to be global; only if it is indeed limited to a one-time local role is it determined to be local.\n6. Handling Ambiguity and Insufficient Evidence: If the evidence is insufficient to support the cross-scenario/long-term characteristics of global, it is defaulted to local (conservative strategy).\n7. Consistency Check: Ensure that the conclusion is supported by the input evidence; do not introduce common-sense guesses outside the input as the sole basis.\n\n[Output Format (Strictly Follow)]\nOnly output one of the following two JSONs:\n\n```json\n{{\n  \"scope\": \"global\"\n}}\n```\nOr\n\n```json\n{{\n  \"scope\": \"local\"\n}}\n```\n\n[Strict Requirements]\n- Only output the above JSON object, do not output explanations or extra fields.\n- Field names and capitalization must be consistent: scope.\n- Ensure valid JSON, parsable directly.\n- The determination basis must come from the input context; choose local when there is insufficient evidence.",
  "variables": [
    {
      "name": "context",
      "description": "Contextual evidence for a single entity: name/alias, scenes or chapters of appearance, timeline, relationship with other entities/events, whether it is a world-setting element, whether it has been cited multiple times, etc."
    }
  ]
}